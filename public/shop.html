<!DOCTYPE html>
<html>
<head>
<title>Shop</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<nav class="navbar">
<div>ðŸ›’ FreshMart AI</div>
<div>
<a href="index.html">Home</a>
<a href="login.html">Admin</a>
</div>
</nav>

<h1>Products</h1>

<div class="grid" id="products"></div>

<script>

let products=JSON.parse(localStorage.getItem("products")) || [];

const container=document.getElementById("products");

if(products.length===0){
container.innerHTML="<p>No products added yet.</p>";
}

products.forEach((p,index)=>{

container.innerHTML+=`
<div class="card">
<img src="${p.image}" width="100%">
<h3>${p.name}</h3>
<p>â‚¹${p.price}</p>
<p>Stock: ${p.stock}</p>
<button onclick="buy(${index})">Buy</button>
</div>
`;

});

function buy(i){

let products=JSON.parse(localStorage.getItem("products"));

if(products[i].stock<=0){
alert("Out of stock");
return;
}

products[i].stock--;

localStorage.setItem("products",JSON.stringify(products));

fetch("http://localhost:3000/buy",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
product:products[i].name
})
});

alert("âœ… Order placed!");
location.reload();
}

</script>

</body>
</html>
